upstream portal {
    server unix:///var/run/captive-portal/uwsgi.sock;
}

server {

    listen 0.0.0.0:80;
    server_name captive-portal;

    # Disable keep-alives: once authenticated the browser may reuse the connection when going to the initial site.
    keepalive_timeout 0;

    # no need for logs
    access_log off;
    
    location / {
      uwsgi_pass  portal;
      include uwsgi_params;
    }
}
